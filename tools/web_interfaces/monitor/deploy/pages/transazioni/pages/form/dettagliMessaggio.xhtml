<ui:composition template="/templates/defaultTemplate.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:link="http://www.link.it">
	<ui:define name="navbar">
			<ul>
				<li>
					<a4j:htmlCommandLink action="transazioniList" value="Visualizza Transazioni" rendered="#{searchFormTransazioni.periodo != 'Live'}"/>
					<a4j:htmlCommandLink action="transazioniList" value="Visualizza Transazioni (Live)" rendered="#{searchFormTransazioni.periodo eq 'Live'}">
						<f:setPropertyActionListener value="#{true}" target="#{searchFormTransazioni.sessioneLiveValida}" />
					</a4j:htmlCommandLink>
				</li>
				<li><h:graphicImage value="/images/tema_link/next_white.png" width="16" height="16"/></li>
				<li><h:outputText styleClass="ultimo-path" id="dettaglio" value="Dettaglio Transazione" /></li>
			</ul>
	</ui:define>
	
	<ui:define name="body">
		<a4j:loadScript src="resource://jquery.js"/>
			<script type="text/javascript">
				 jQuery(document).ready(function() {
					checkBrowser();
				 });
			</script>
		<a4j:keepAlive beanName="dettagliBean" />
		
			
				<rich:panel id="panelDettaglioTransazione" rendered="#{not empty dettagliBean.dettaglio}">
					<f:facet name="header">
						<h:outputText id="outDettagli" value="Dettagli Transazione" />
					</f:facet>
					
					<link:fieldset legend="Informazioni Generali"
						rendered="#{true}" collapsible="false" closed="false">
					
						<h:panelGrid id="panelDettaglioPrincipale" columns="2" styleClass="borderSpacingTable" columnClasses="labelAllineataDxFixedWidth130,valueAllineataSx" >
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelTipologia" value="Tipologia" rendered="#{not empty dettagliBean.tipologiaConProtocollo}" />
							<h:outputText id="outTipologia" value="#{dettagliBean.tipologiaConProtocollo}" rendered="#{not empty dettagliBean.tipologiaConProtocollo}" />
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelOp" value="Operazione" rendered="#{not empty dettagliBean.dettaglio.operazioneIm}"/>
							<h:outputText id="outOp" value="#{dettagliBean.dettaglio.operazioneIm}" rendered="#{not empty dettagliBean.dettaglio.operazioneIm}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelFruitore" value="Fruitore" rendered="#{not empty dettagliBean.dettaglio.nomeSoggettoFruitore}"/>
							<h:outputText id="outFruitore" value="#{dettagliBean.dettaglio.tipoSoggettoFruitore}/#{dettagliBean.dettaglio.nomeSoggettoFruitore}" rendered="#{not empty dettagliBean.dettaglio.nomeSoggettoFruitore}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelErogatore" value="Erogatore" rendered="#{not empty dettagliBean.dettaglio.nomeSoggettoErogatore}"/>
							<h:outputText id="outErogatore" value="#{dettagliBean.dettaglio.tipoSoggettoErogatore}/#{dettagliBean.dettaglio.nomeSoggettoErogatore}" rendered="#{not empty dettagliBean.dettaglio.nomeSoggettoErogatore}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelServizio" value="Servizio" rendered="#{not empty dettagliBean.dettaglio.nomeServizio}"/>
							<h:outputText id="outServizio" value="#{dettagliBean.dettaglio.tipoServizio}/#{dettagliBean.dettaglio.nomeServizio}" rendered="#{not empty dettagliBean.dettaglio.nomeServizio}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelAzione" value="Azione" rendered="#{not empty dettagliBean.dettaglio.azione}"/>
							<h:outputText id="outAzione" value="#{dettagliBean.dettaglio.azione}" rendered="#{not empty dettagliBean.dettaglio.azione}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelProfColl" value="Profilo Collaborazione" rendered="#{not empty dettagliBean.dettaglio.profiloCollaborazioneProt or not empty dettagliBean.dettaglio.profiloCollaborazioneOp2}"/>
							<h:outputText id="outProfCollProt" value="#{dettagliBean.dettaglio.profiloCollaborazioneProt}" rendered="#{not empty dettagliBean.dettaglio.profiloCollaborazioneProt}"/>
							<h:outputText id="outProfCollOp2" value="#{dettagliBean.dettaglio.profiloCollaborazioneOp2}" rendered="#{empty dettagliBean.dettaglio.profiloCollaborazioneProt and not empty dettagliBean.dettaglio.profiloCollaborazioneOp2}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelServizioApplicativoFruitore" value="Applicativo Fruitore" rendered="#{not empty dettagliBean.dettaglio.servizioApplicativoFruitore}"/>
							<h:outputText id="outServizioApplicativoFruitore" value="#{dettagliBean.dettaglio.servizioApplicativoFruitore}" rendered="#{not empty dettagliBean.dettaglio.servizioApplicativoFruitore}"/>
								
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelServizioApplicativoErogatore" value="Applicativo Erogatore" rendered="#{not empty dettagliBean.dettaglio.servizioApplicativoErogatore}"/>
							<h:outputText id="outServizioApplicativoErogatore" value="#{dettagliBean.dettaglio.servizioApplicativoErogatore}" rendered="#{not empty dettagliBean.dettaglio.servizioApplicativoErogatore}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelCorrApp" value="ID Applicativo Richiesta" rendered="#{not empty dettagliBean.dettaglio.idCorrelazioneApplicativa}"/>
							<h:outputText id="outCorrApp" value="#{dettagliBean.dettaglio.idCorrelazioneApplicativa}" rendered="#{not empty dettagliBean.dettaglio.idCorrelazioneApplicativa}"/>
													
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelCorrAppRisp" value="ID Applicativo Risposta" rendered="#{not empty dettagliBean.dettaglio.idCorrelazioneApplicativaRisposta}"/>
							<h:outputText id="outCorrAppRisp" value="#{dettagliBean.dettaglio.idCorrelazioneApplicativaRisposta}" rendered="#{not empty dettagliBean.dettaglio.idCorrelazioneApplicativaRisposta}"/>
													
							<h:outputLabel value="Esito" id="esito-iconLabel" styleClass="outputFieldLabel #{dettagliBean.dettaglio.esitoStyleClass}"/>
							<h:outputText id="outEsito" value="#{dettagliBean.dettaglio.esito}" converter="esitoConverter"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelEsitoContesto" value="Contesto" rendered="#{dettagliBean.dettaglio.showContesto and not empty dettagliBean.dettaglio.esitoContesto}"/>
							<h:outputText id="outEsitoContesto" value="#{dettagliBean.dettaglio.esitoContesto}"
								converter="esitoContestoConverter" 
								rendered="#{dettagliBean.dettaglio.showContesto and not empty dettagliBean.dettaglio.esitoContesto}"/>
													
							<h:outputLabel id="diag-iconLabel" value="Diagnostici" styleClass="outputFieldLabel icon-show-diagnostici"/>
							<h:panelGroup id="panelGroupDiag">
								<h:form id="formDiag">
									<h:panelGrid id="panelDiag" columns="3">
										<a4j:htmlCommandLink id="diag-iconLink" styleClass="icon-details" action="visualizzaDiagnostici" value="Visualizza">
				                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{diagnosticiBean.idTransazione}"/>
				                    		<a4j:actionparam value="#{dettagliBean.idEgov}" assignTo="#{diagnosticiBean.idEgov}"/>
				                    		<a4j:actionparam value="#{dettagliBean.identificativoPorta}" assignTo="#{diagnosticiBean.identificativoPorta}"/>
				                    	</a4j:htmlCommandLink>
				                    	<h:outputLabel value="&#160;|&#160;" />	                    	
				                    	<a4j:htmlCommandLink id="exportDiagnostici-iconLink" target="_blank" styleClass="icon-compress" action="#{dettagliBean.saveDiagnostici}">
											<h:outputText id="outEsporta" value="Esporta" />
										</a4j:htmlCommandLink>
			                    	</h:panelGrid>
								</h:form>
							</h:panelGroup>
											
						</h:panelGrid>
						
					</link:fieldset>
										
					<rich:spacer id="spacerRichiesta" height="10px"/>
					
					<link:fieldset legend="Dettagli Richiesta"
						rendered="#{true}" collapsible="false" closed="false">
											 
							<h:panelGrid id="panelGridDettRich" columns="2" styleClass="borderSpacingTable" columnClasses="labelAllineataDxFixedWidth130,valueAllineataSx">
							
								<h:outputLabel styleClass="outputFieldLabel" id="outLabelIdEgovRich" value="ID Messaggio" rendered="#{not empty dettagliBean.dettaglio.idMessaggioRichiesta}"/>
								<h:outputText id="outIdEgovRich" value="#{dettagliBean.dettaglio.idMessaggioRichiesta}" rendered="#{not empty dettagliBean.dettaglio.idMessaggioRichiesta}"/>
											
								<h:outputLabel value="Data Accettazione" id="dataAccR-iconLabel" styleClass="outputFieldLabel icon-date" 
									rendered="#{dettagliBean.visualizzaDataAccettazione and not empty dettagliBean.dettaglio.dataAccettazioneRichiesta}"/>
								<h:outputText id="outDataAccettazioneRich" value="#{dettagliBean.dettaglio.dataAccettazioneRichiesta}" 
									rendered="#{dettagliBean.visualizzaDataAccettazione and not empty dettagliBean.dettaglio.dataAccettazioneRichiesta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>	
											
								<h:outputLabel value="Data Ingresso" id="dataInR-iconLabel" styleClass="outputFieldLabel icon-date" rendered="#{not empty dettagliBean.dettaglio.dataIngressoRichiesta}"/>
								<h:outputText id="outDataIngressoRich" value="#{dettagliBean.dettaglio.dataIngressoRichiesta}" rendered="#{not empty dettagliBean.dettaglio.dataIngressoRichiesta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>	
								
								<h:outputLabel value="Data Uscita" id="dataOR-iconLabel" styleClass="outputFieldLabel icon-date" rendered="#{not empty dettagliBean.dettaglio.dataUscitaRichiesta}"/>
								<h:outputText id="outDataUscitaRich" value="#{dettagliBean.dettaglio.dataUscitaRichiesta}" rendered="#{not empty dettagliBean.dettaglio.dataUscitaRichiesta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>
								
								<h:outputLabel value="Bytes Ingresso" id="dimInR-iconLabel" styleClass="outputFieldLabel icon-compress"/>
								<h:outputText value="#{empty dettagliBean.dettaglio.richiestaIngressoBytes ? 'n.d.' : dettagliBean.dettaglio.richiestaIngressoBytes}" converter="fileSizeConverter"/>
								
								<h:outputLabel value="Bytes Uscita" id="dimOutR-iconLabel" styleClass="outputFieldLabel icon-compress"/>
								<h:outputText value="#{empty dettagliBean.dettaglio.richiestaUscitaBytes ? 'n.d.' : dettagliBean.dettaglio.richiestaUscitaBytes}" converter="fileSizeConverter"/>										
																								
								<h:outputLabel id="req-iconLabel" styleClass="outputFieldLabel icon-show-traccia" value="Traccia" rendered="#{dettagliBean.existsTracciaRichiesta}"/>
								<h:panelGroup id="panelGroupReq" rendered="#{dettagliBean.existsTracciaRichiesta}">
									<h:form id="formTracciaReq">
										<h:panelGrid id="panelGridTracciaReq" columns="3">
											<a4j:htmlCommandLink id="tracciaReq-iconLink" 
		                    						styleClass="icon-details" 
		                    						action="visualizzaTraccia" 
		                    						value="Visualizza" 
		                    						actionListener="#{dettagliBean.tracciaListener}">
					                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliBean.idTransazione}"/>
					                    		<f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
						                    	<f:setPropertyActionListener value="#{dettagliBean.identificativoPorta}" target="#{dettagliBean.identificativoPorta}"/>
						                    	<f:setPropertyActionListener value="#{false}" target="#{dettagliBean.isRisposta}"/>
					                    	</a4j:htmlCommandLink>
					                    	<h:outputLabel value="&#160;|&#160;" />	 
					                    	<h:commandLink id="exportTracce-iconLink" target="_blank" styleClass="icon-compress" action="#{dettagliBean.saveTracce}">
					                    		<f:setPropertyActionListener value="#{false}" target="#{dettagliBean.isRisposta}"/>
												<h:outputText id="outEsportaReq" value="Esporta" />
											</h:commandLink>
										</h:panelGrid>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel id="req-dumpMessaggi-iconLabel" styleClass="outputFieldLabel icon-xml" value="Contenuti" rendered="#{dettagliBean.hasDumpRichiesta}"/>
								<h:panelGroup id="panelGroupDumpMessaggiReq" rendered="#{dettagliBean.hasDumpRichiesta}">
									<h:form id="formDumpMessaggiReq">
										<a4j:htmlCommandLink id="dumpMessaggi-iconLink"
				                    						 styleClass="icon-details"
				                    						 value="Visualizza"
				                    						 rendered="#{dettagliBean.hasDumpRichiesta}"
				                    						 action="dettaglioDump">
				                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliDump.idTransazione}"/>
					                    	<f:setPropertyActionListener value="#{false}" target="#{dettagliDump.isRisposta}"/>
					                    	<f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
				                    	</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel id="req-headerTrasporto-iconLabel" styleClass="outputFieldLabel icon-show-http" value="Headers HTTP" rendered="#{dettagliBean.hasHeaderTrasportoRichiesta}"/>
								<h:panelGroup id="panelGroupheaderTrasportoReq" rendered="#{dettagliBean.hasHeaderTrasportoRichiesta}">
									<h:form id="formHeaderTrasportoReq">
				                    	<a4j:htmlCommandLink id="headerTrasporto-iconLink"
				                    						 styleClass="icon-details"
				                    						 value="Visualizza"
				                    						 rendered="#{dettagliBean.hasHeaderTrasportoRichiesta}"
				                    						 action="headerTrasporto">
				                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliDump.idTransazione}"/>
					                    	<f:setPropertyActionListener value="#{false}" target="#{dettagliDump.isRisposta}"/>
					                    	<f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
				                    	</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>
												
								<h:outputLabel value="Duplicato" id="bustaDupR-iconLabel" styleClass="outputFieldLabel icon-busta-duplicata" style="font-weight:bold;" 
												rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta==-1 and not empty dettagliBean.transazioneOriginaleRichiesta}"/>
								<h:form id="formDuplicaRich" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta==-1 and not empty dettagliBean.transazioneOriginaleRichiesta}">
									<a4j:commandLink id="details"  
														actionListener="#{dettagliBean.showOriginaleSelected}" 
														reRender="panelDettaglioTransazione"
														rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta==-1 and not empty dettagliBean.transazioneOriginaleRichiesta}">
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRichiesta.idTransazione}" target="#{dettagliBean.idTransazione}"/>
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRichiesta.idMessaggioRichiesta}" target="#{dettagliBean.idEgov}"/>
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRichiesta.idportaSoggettoFruitore}" target="#{dettagliBean.identificativoPorta}"/>
										<h:outputText id="visualizzaTransOrig" value="Visualizza Transazione Originale" />
									</a4j:commandLink>
								</h:form>
								
								<h:outputLabel value="Duplicati" id="bustaDupReq-iconLabel" styleClass="outputFieldLabel icon-busta-duplicata" style="font-weight:bold;" 
												rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}"/>
								<h:panelGroup id="panelGroupDuplicatiReq" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}">
									<h:form id="formDuplicatiReq">										
										<h:outputLink id="hideDups-iconLink" styleClass="icon-details" value="#" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}" style="display: none;">
				                    		<h:outputText id="outNascondiDuplicati" value="Nascondi" />
				                    		<rich:effect id="blindUpHideDups" for="hideDups-iconLink" event="onclick" type="BlindUp" targetId="duplicatiDiv" params="duration:0.8"/>
				                    		<rich:effect id="fadeHideDups" for="hideDups-iconLink" event="onclick" type="Fade" targetId="hideDups-iconLink" params="delay:0.0,duration:0.0"/>
				                    		<rich:effect id="appearHideDups" for="hideDups-iconLink" event="onclick" type="Appear" targetId="showDups-iconLink" params="delay:0.0,duration:0.0"/>
				                    	</h:outputLink>
				                    	<h:outputLink id="showDups-iconLink" styleClass="icon-details" value="#" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}">
				                    		<h:outputText id="outVisualizzaDuplicati" value="Visualizza (#{dettagliBean.dettaglio.duplicatiRichiesta})" />
				                    		<rich:effect id="blindDownShowDups" for="showDups-iconLink" event="onclick" type="BlindDown" targetId="duplicatiDiv" params="delay:0.1,duration:1.0,from:0.0,to:1.0"/>
				                    		<rich:effect id="appearShowDups1" for="showDups-iconLink" event="onclick" type="Appear" targetId="duplicatiDiv" params="delay:0.1,duration:0.5,from:0.0,to:1.0"/>
				                    		<rich:effect id="fadeShowDups" for="showDups-iconLink" event="onclick" type="Fade" targetId="showDups-iconLink" params="delay:0.0,duration:0.0"/>
				                    		<rich:effect id="appearShowDups2" for="showDups-iconLink" event="onclick" type="Appear" targetId="hideDups-iconLink" params="delay:0.0,duration:0.0"/>
				                    	</h:outputLink>
									</h:form>
								</h:panelGroup>	
								
							</h:panelGrid>

							<!-- Originale, visualizza duplicati: Tabella -->
							<rich:spacer id="spacerDuplicatiDivReq" height="5px" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}"/>
							<h:panelGroup id="duplicatiDiv" layout="block" style="display: none;" rendered="#{not empty dettagliBean.dettaglio.duplicatiRichiesta and dettagliBean.dettaglio.duplicatiRichiesta>0}" switchType="client">
								<a4j:form id="formDupsReq">
									<link:dataTable id="dupsReqDt" 
											value="#{transazioniDuplicatiDMRichiesta}"
											headerText="Lista Transazioni Duplicate"
											topScrollerAlign="left"
											width="416px"
											showSelectAll="false"
											enableDelete="false">
											<rich:column id="colData">
												<f:facet name="header">
													<h:outputText id="outData" value="Data" />
												</f:facet>
												<a4j:commandLink id="details-iconLink" styleClass="icon-details" actionListener="#{dettagliBean.showDuplicatoSelected}" reRender="panelDettaglioTransazione">
													<f:setPropertyActionListener value="#{item.idTransazione}" target="#{dettagliBean.idTransazione}"/>
													<f:setPropertyActionListener value="#{item.idMessaggioRichiesta}" target="#{dettagliBean.idEgov}"/>
													<f:setPropertyActionListener value="#{item.idportaSoggettoFruitore}" target="#{dettagliBean.identificativoPorta}"/>
													<h:outputText id="outDataIngrRich" value="#{item.dataIngressoRichiesta}">
														<f:convertDateTime  pattern="yyyy-MM-dd HH:mm:ss"
															timeZone="Europe/Rome" />
													</h:outputText>
												</a4j:commandLink>
											</rich:column>
									</link:dataTable>
								</a4j:form>						
							</h:panelGroup>
					
					</link:fieldset>
					
					<rich:spacer id="spacerRisposta" height="10px"/>
					
					<link:fieldset legend="Dettagli Risposta"
						rendered="#{true}" collapsible="false" closed="false">
						
							<h:panelGrid id="panelGridDettagliRisp" columns="2" styleClass="borderSpacingTable" columnClasses="labelAllineataDxFixedWidth130,valueAllineataSx" >
								
								<h:outputLabel styleClass="outputFieldLabel" id="outLabelIdEgovRisp" value="ID Messaggio" rendered="#{not empty dettagliBean.dettaglio.idMessaggioRisposta and dettagliBean.existsTracciaRisposta}"/>
								<h:outputText id="outIdEgovRisp" value="#{dettagliBean.dettaglio.idMessaggioRisposta}" rendered="#{not empty dettagliBean.dettaglio.idMessaggioRisposta and dettagliBean.existsTracciaRisposta}"/>
								
								<h:outputLabel value="Data Accettazione" id="dataAccResp-iconLabel" styleClass="outputFieldLabel icon-date" 
									rendered="#{dettagliBean.visualizzaDataAccettazione and not empty dettagliBean.dettaglio.dataAccettazioneRisposta}"/>
								<h:outputText id="outDataAccettazioneRisp" value="#{dettagliBean.dettaglio.dataAccettazioneRisposta}" 
									rendered="#{dettagliBean.visualizzaDataAccettazione and not empty dettagliBean.dettaglio.dataAccettazioneRisposta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>
										
								<h:outputLabel value="Data Ingresso" id="dataInResp-iconLabel" styleClass="outputFieldLabel icon-date" rendered="#{not empty dettagliBean.dettaglio.dataIngressoRisposta}"/>
								<h:outputText id="outDataIngressoRisp" value="#{dettagliBean.dettaglio.dataIngressoRisposta}" rendered="#{not empty dettagliBean.dettaglio.dataIngressoRisposta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>
								
								<h:outputLabel value="Data Uscita" id="dataOResp-iconLabel" styleClass="outputFieldLabel icon-date" rendered="#{not empty dettagliBean.dettaglio.dataUscitaRisposta}"/>
								<h:outputText id="outDataUscitaRisp" value="#{dettagliBean.dettaglio.dataUscitaRisposta}" rendered="#{not empty dettagliBean.dettaglio.dataUscitaRisposta}">
									<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome"/>
								</h:outputText>
								
								<h:outputLabel value="Bytes Ingresso" id="dimInRes-iconLabel" styleClass="outputFieldLabel icon-compress"/>
								<h:outputText value="#{empty dettagliBean.dettaglio.rispostaIngressoBytes ? 'n.d.' : dettagliBean.dettaglio.rispostaIngressoBytes}" converter="fileSizeConverter"/>
								
								<h:outputLabel value="Bytes Uscita" id="dimOutRes-iconLabel" styleClass="outputFieldLabel icon-compress"/>
								<h:outputText value="#{empty dettagliBean.dettaglio.rispostaUscitaBytes ? 'n.d.' : dettagliBean.dettaglio.rispostaUscitaBytes}" converter="fileSizeConverter"/>
								
								<h:outputLabel id="risp-iconLabel" styleClass="outputFieldLabel icon-show-traccia" value="Traccia" rendered="#{dettagliBean.existsTracciaRisposta}"/>
								<h:panelGroup id="panelGroupIdEgovRisp" rendered="#{dettagliBean.existsTracciaRisposta}">
									<h:form id="formTracciaResp">
										<a4j:htmlCommandLink id="tracciaResp-iconLink" 
					                   			styleClass="icon-details" 
					                   			action="visualizzaTraccia" 
					                   			value="Visualizza"
					                   			actionListener="#{dettagliBean.tracciaListener}">
					                   		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliBean.idTransazione}"/>
					                    	<f:setPropertyActionListener value="#{dettagliBean.identificativoPorta}" target="#{dettagliBean.identificativoPorta}"/>
					                    	<f:setPropertyActionListener value="#{true}" target="#{dettagliBean.isRisposta}"/>
					                   	</a4j:htmlCommandLink>
					                   	<h:outputLabel value="&#160;|&#160;" />	 
					                   	<h:commandLink id="exportTracce-iconLink" target="_blank" styleClass="icon-compress" action="#{dettagliBean.saveTracce}">
					                    	<f:setPropertyActionListener value="#{true}" target="#{dettagliBean.isRisposta}"/>
											<h:outputText id="outEsportaResp" value="Esporta" />
										</h:commandLink>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel id="risp-faultCooperazione-iconLabel" styleClass="outputFieldLabel icon-xml" value="Fault Cooperazione" rendered="#{not empty dettagliBean.dettaglio.faultCooperazione}"/>
								<h:panelGroup id="panelGroupFaultCooperazioneRisp" rendered="#{not empty dettagliBean.dettaglio.faultCooperazione}"> <!-- Lo vogliamo sempre, puo' essere utile and !dettagliBean.hasDumpRisposta}" -->
									<h:form id="formFaultCooperazione">
	                                        <a4j:htmlCommandLink id="faultCooperazione-iconLink"
	                                                                         styleClass="icon-details"
	                                                                         value="Visualizza"
	                                                                         rendered="#{not empty dettagliBean.dettaglio.faultCooperazione}" 
	                                                                         action="fault">
		                                        <f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliBean.idTransazione}"/>
		                                        <f:setPropertyActionListener value="#{true}" target="#{dettagliBean.isRisposta}"/>
		                                        <f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
												<f:setPropertyActionListener value="#{true}" target="#{dettagliBean.showFaultCooperazione}"/>
	                               			</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel id="risp-faultIntegrazione-iconLabel" styleClass="outputFieldLabel icon-xml" value="Fault Integrazione" rendered="#{not empty dettagliBean.dettaglio.faultIntegrazione}"/>
								<h:panelGroup id="panelGroupFaultIntegrazioneRisp" rendered="#{not empty dettagliBean.dettaglio.faultIntegrazione}"> <!-- Lo vogliamo sempre, puo' essere utile and !dettagliBean.hasDumpRisposta}" -->
									<h:form id="formFaultIntegrazione">
	                                        <a4j:htmlCommandLink id="faultIntegrazione-iconLink"
	                                                                         styleClass="icon-details"
	                                                                         value="Visualizza"
	                                                                         rendered="#{not empty dettagliBean.dettaglio.faultIntegrazione}"
	                                                                         action="fault">
		                                        <f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliBean.idTransazione}"/>
		                                        <f:setPropertyActionListener value="#{true}" target="#{dettagliBean.isRisposta}"/>
		                                        <f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
												<f:setPropertyActionListener value="#{true}" target="#{dettagliBean.showFaultIntegrazione}"/>
	                               			</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>								
								
								<h:outputLabel id="res-dumpMessaggi-iconLabel" styleClass="outputFieldLabel icon-xml" value="Contenuti" rendered="#{dettagliBean.hasDumpRisposta}"/>
								<h:panelGroup id="panelGroupDumpMessaggiRes" rendered="#{dettagliBean.hasDumpRisposta}">
									<h:form id="formDumpMessaggiRes">
										<a4j:htmlCommandLink id="dumpMessaggiRes-iconLink"
				                    						 styleClass="icon-details"
				                    						 value="Visualizza"
				                    						 rendered="#{dettagliBean.hasDumpRisposta}"
				                    						 action="dettaglioDump">
				                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliDump.idTransazione}"/>
					                    	<f:setPropertyActionListener value="#{true}" target="#{dettagliDump.isRisposta}"/>
					                    	<f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
				                    	</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel id="res-headerTrasporto-iconLabel" styleClass="outputFieldLabel icon-show-http" value="Headers HTTP" rendered="#{dettagliBean.hasHeaderTrasportoRisposta}"/>
								<h:panelGroup id="panelGroupheaderTrasportoRes" rendered="#{dettagliBean.hasHeaderTrasportoRisposta}">
									<h:form id="formHeaderTrasportoRes">
				                    	<a4j:htmlCommandLink id="headerTrasportoRes-iconLink"
				                    						 styleClass="icon-details"
				                    						 value="Visualizza"
				                    						 rendered="#{dettagliBean.hasHeaderTrasportoRisposta}"
				                    						 action="headerTrasporto">
				                    		<f:setPropertyActionListener value="#{dettagliBean.idTransazione}" target="#{dettagliDump.idTransazione}"/>
					                    	<f:setPropertyActionListener value="#{true}" target="#{dettagliDump.isRisposta}"/>
					                    	<f:setPropertyActionListener value="#{dettagliBean.idEgov}" target="#{dettagliBean.idEgov}"/>
				                    	</a4j:htmlCommandLink>
									</h:form>
								</h:panelGroup>
								
								<h:outputLabel value="Duplicato" id="bustaDupResp-iconLabel" styleClass="outputFieldLabel icon-busta-duplicata" style="font-weight:bold;" 
												rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta==-1 and not empty dettagliBean.transazioneOriginaleRisposta}"/>
								<h:form id="formDuplicaRisp" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta==-1 and not empty dettagliBean.transazioneOriginaleRisposta}">
									<a4j:commandLink id="detailsRisposta"  
														actionListener="#{dettagliBean.showOriginaleSelected}" 
														reRender="panelDettaglioTransazione"
														rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta==-1 and not empty dettagliBean.transazioneOriginaleRisposta}">
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRisposta.idTransazione}" target="#{dettagliBean.idTransazione}"/>
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRisposta.idMessaggioRisposta}" target="#{dettagliBean.idEgov}"/>
										<f:setPropertyActionListener value="#{dettagliBean.transazioneOriginaleRisposta.idportaSoggettoFruitore}" target="#{dettagliBean.identificativoPorta}"/>
										<h:outputText id="visualizzaTransOrig" value="Visualizza Transazione Originale" />
									</a4j:commandLink>
								</h:form>
								
								<h:outputLabel value="Duplicati" id="bustaDupRes-iconLabel" styleClass="outputFieldLabel icon-busta-duplicata" style="font-weight:bold;" 
												rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}"/>
								<h:panelGroup id="panelGroupDuplicatiRes" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}">
									<h:form id="formDuplicatiRes">										
										<h:outputLink id="hideDupsResp-iconLink" styleClass="icon-details" value="#" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}" style="display: none;">
				                    		<h:outputText id="outNascondiDuplicati" value="Nascondi" />
				                    		<rich:effect id="blindUpHideDups" for="hideDupsResp-iconLink" event="onclick" type="BlindUp" targetId="duplicatiDivResp" params="duration:0.8"/>
				                    		<rich:effect id="fadeHideDups" for="hideDupsResp-iconLink" event="onclick" type="Fade" targetId="hideDupsResp-iconLink" params="delay:0.0,duration:0.0"/>
				                    		<rich:effect id="appearHideDups" for="hideDupsResp-iconLink" event="onclick" type="Appear" targetId="showDupsResp-iconLink" params="delay:0.0,duration:0.0"/>
				                    	</h:outputLink>
				                    	<h:outputLink id="showDupsResp-iconLink" styleClass="icon-details" value="#" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}">
				                    		<h:outputText id="outVisualizzaDuplicati" value="Visualizza (#{dettagliBean.dettaglio.duplicatiRisposta})" />
				                    		<rich:effect id="blindDownShowDups" for="showDupsResp-iconLink" event="onclick" type="BlindDown" targetId="duplicatiDivResp" params="delay:0.1,duration:1.0,from:0.0,to:1.0"/>
				                    		<rich:effect id="appearShowDups1" for="showDupsResp-iconLink" event="onclick" type="Appear" targetId="duplicatiDivResp" params="delay:0.1,duration:0.5,from:0.0,to:1.0"/>
				                    		<rich:effect id="fadeShowDups" for="showDupsResp-iconLink" event="onclick" type="Fade" targetId="showDupsResp-iconLink" params="delay:0.0,duration:0.0"/>
				                    		<rich:effect id="appearShowDups2" for="showDupsResp-iconLink" event="onclick" type="Appear" targetId="hideDupsResp-iconLink" params="delay:0.0,duration:0.0"/>
				                    	</h:outputLink>
									</h:form>
								</h:panelGroup>	
								
							</h:panelGrid>

							<rich:spacer id="spacerDuplicatiDivRes" height="5px" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}"/>
							<h:panelGroup id="duplicatiDivResp" layout="block" style="display: none;" rendered="#{not empty dettagliBean.dettaglio.duplicatiRisposta and dettagliBean.dettaglio.duplicatiRisposta>0}" switchType="client">
								<a4j:form id="formDupsRes">
									<link:dataTable id="dupsResDt" 
											value="#{transazioniDuplicatiDMRisposta}"
											headerText="Lista Transazioni Duplicate"
											topScrollerAlign="left"
											width="416px"
											showSelectAll="false"
											enableDelete="false">
											<rich:column id="colDataRes">
												<f:facet name="header">
													<h:outputText id="outDataRes" value="Data" />
												</f:facet>
												<a4j:commandLink id="detailsRes-iconLink" styleClass="icon-details" actionListener="#{dettagliBean.showDuplicatoSelected}" reRender="panelDettaglioTransazione">
													<f:setPropertyActionListener value="#{item.idTransazione}" target="#{dettagliBean.idTransazione}"/>
													<f:setPropertyActionListener value="#{item.idMessaggioRisposta}" target="#{dettagliBean.idEgov}"/>
													<f:setPropertyActionListener value="#{item.idportaSoggettoFruitore}" target="#{dettagliBean.identificativoPorta}"/>
													<h:outputText id="outDataIngrRisp" value="#{item.dataIngressoRichiesta}">
														<f:convertDateTime  pattern="yyyy-MM-dd HH:mm:ss"
															timeZone="Europe/Rome" />
													</h:outputText>
												</a4j:commandLink>
											</rich:column>
									</link:dataTable>
								</a4j:form>						
							</h:panelGroup>

						
					</link:fieldset>
					
					<rich:spacer id="spacerInformazioniAvanzate" height="10px"/>
					
					<link:fieldset legend="Informazioni Avanzate"
						rendered="#{true}" collapsible="false" closed="false">
					
						<h:panelGrid id="panelInformazioniAvanzate" columns="2" styleClass="borderSpacingTable" columnClasses="labelAllineataDxFixedWidth130,valueAllineataSx" >
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelIdTransazione" value="ID Transazione" rendered="#{not empty dettagliBean.dettaglio.idTransazione}" />
							<h:outputText id="outIdTransazione" value="#{dettagliBean.dettaglio.idTransazione}" rendered="#{not empty dettagliBean.dettaglio.idTransazione}" />
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelIdCluster" value="ID Cluster" rendered="#{not empty dettagliBean.dettaglio.clusterId}" />
							<h:outputText id="outIdCluster" value="#{dettagliBean.dettaglio.clusterId}" rendered="#{not empty dettagliBean.dettaglio.clusterId}" />
												
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelPdD" value="PdD (ID)" rendered="#{loginBean.loggedUser.sizeSoggetti!=1}"/>
							<h:outputText id="outPdD" value="#{dettagliBean.dettaglio.pddCodice}" rendered="#{loginBean.loggedUser.sizeSoggetti!=1}"/>
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelSoggettoPdD" value="PdD (Soggetto)" rendered="#{loginBean.loggedUser.sizeSoggetti!=1}"/>
							<h:outputText id="outPdDSoggetto" value="#{dettagliBean.dettaglio.pddTipoSoggetto}/#{dettagliBean.dettaglio.pddNomeSoggetto}" rendered="#{loginBean.loggedUser.sizeSoggetti!=1}"/>
																		
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelUrlInvocazione" value="URL Invocazione" rendered="#{not empty dettagliBean.dettaglio.urlInvocazione}"/>
							<h:outputText id="outUrlInvocazione" value="#{dettagliBean.dettaglio.urlInvocazione}" rendered="#{not empty dettagliBean.dettaglio.urlInvocazione}"/>
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelCredenziali" value="Credenziali" rendered="#{not empty dettagliBean.dettaglio.credenziali}"/>
							<h:outputText id="outCredenziali" value="#{dettagliBean.dettaglio.credenziali}" rendered="#{not empty dettagliBean.dettaglio.credenziali}"/>
							
							<h:outputText styleClass="outputFieldLabel" id="outLabelNomePorta" value="#{dettagliBean.dettaglio.pddRuolo=='DELEGATA' ? 'PortaDelegata' : dettagliBean.dettaglio.pddRuolo=='APPLICATIVA' ? 'PortaApplicativa' : dettagliBean.dettaglio.pddRuolo=='ROUTER' ? 'Porta' : 'Porta'}"
							rendered="#{not empty dettagliBean.dettaglio.pddRuolo and not empty dettagliBean.dettaglio.nomePorta}"/>
							<h:outputText id="outNomePorta" value="#{dettagliBean.dettaglio.nomePorta}" rendered="#{not empty dettagliBean.dettaglio.pddRuolo and not empty dettagliBean.dettaglio.nomePorta}"/>
													
							<h:outputText styleClass="outputFieldLabel" id="outLabelConnettore" value="#{dettagliBean.dettaglio.pddRuolo=='DELEGATA' ? 'URL Inoltro' : dettagliBean.dettaglio.pddRuolo=='APPLICATIVA' ? 'URL Consegna' : dettagliBean.dettaglio.pddRuolo=='ROUTER' ? 'URL Inoltro' : 'URL Inoltro'}"
							rendered="#{not empty dettagliBean.dettaglio.pddRuolo and not empty dettagliBean.dettaglio.locationConnettore}"/>
							<h:outputText id="outConnettore" value="#{dettagliBean.dettaglio.locationConnettore}" rendered="#{not empty dettagliBean.dettaglio.pddRuolo and not empty dettagliBean.dettaglio.locationConnettore}"/>

							<h:outputLabel styleClass="outputFieldLabel" id="outLabelIndirizzoClient" value="Indirizzo Client" rendered="#{not empty dettagliBean.dettaglio.socketClientAddress}" />
							<h:outputText id="outIndirizzoClient" value="#{dettagliBean.dettaglio.socketClientAddress}" rendered="#{not empty dettagliBean.dettaglio.socketClientAddress}" />
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelXForwardedFor" value="X-Forwarded-For" rendered="#{not empty dettagliBean.dettaglio.transportClientAddress}" />
							<h:outputText id="outXForwardedFor" value="#{dettagliBean.dettaglio.transportClientAddress}" rendered="#{not empty dettagliBean.dettaglio.transportClientAddress}" />
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelLatenzaTotale" value="Latenza Totale" rendered="#{not empty dettagliBean.dettaglio.latenzaTotale}" />
							<h:outputText id="outLatenzaTotale" value="#{dettagliBean.dettaglio.latenzaTotale}" rendered="#{not empty dettagliBean.dettaglio.latenzaTotale}" converter="latenzaConverter" />
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelLatenzaServizio" value="Latenza Servizio" rendered="#{not empty dettagliBean.dettaglio.latenzaServizio}" />
							<h:outputText id="outLatenzaServizio" value="#{dettagliBean.dettaglio.latenzaServizio}" rendered="#{not empty dettagliBean.dettaglio.latenzaServizio}" converter="latenzaConverter" />
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelLatenzaPorta" value="Latenza Porta" rendered="#{not empty dettagliBean.dettaglio.latenzaPorta}" />
							<h:outputText id="outLatenzaPorta" value="#{dettagliBean.dettaglio.latenzaPorta}" rendered="#{not empty dettagliBean.dettaglio.latenzaPorta}" converter="latenzaConverter" />
							
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelEventiGestione" value="Eventi" rendered="#{not empty dettagliBean.dettaglio.eventiGestioneHTML}" />
							<h:outputText id="outEventiGestione" value="#{dettagliBean.dettaglio.eventiGestioneHTML}" escape="false" rendered="#{not empty dettagliBean.dettaglio.eventiGestioneHTML}" />
						
							<h:outputLabel styleClass="outputFieldLabel" id="outLabelStato" value="Stato" rendered="#{not empty dettagliBean.dettaglio.stato}" />
							<h:outputText id="outStato" value="#{dettagliBean.dettaglio.stato}" rendered="#{not empty dettagliBean.dettaglio.stato}" />
						
						</h:panelGrid>
					
					</link:fieldset>
					
				</rich:panel>
	</ui:define>
</ui:composition>
