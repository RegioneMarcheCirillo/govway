<project name="openspcoop2-codeGen-govwayConfigApiRS">
    <description>
       Generazione sorgenti relativi al package org.openspcoop2.core.config.rs.server
    </description>

	<import file="${openspcoop2}/ant/commons/swagger-codegen.xml" />
	
	<!-- estensione di ant (if .... ) -->
	<taskdef resource="net/sf/antcontrib/antlib.xml">
          <classpath>
              <pathelement location="${required_lib}/ant/ant-contrib-1.0b3.jar"/>
          </classpath>
	</taskdef>
	



	<!-- ***** CODICE GENERATO A PARTIRE DAI SORGENTI ************ -->
	
	<target name="codegen_from_swagger">

		<if>
		        <equals arg1="${overwriteImpl}" arg2="$${overwriteImpl}"/>
		        <then>
		                <fail message="Parametro overwriteImpl non fornito, la proprietÃ  indica (true/false) se generare le classi 'impl'"/>
		        </then>
		</if>

		<delete dir="${src_govwayConfigApiRS}/schemi/merge"/>
		<mkdir dir="${src_govwayConfigApiRS}/schemi/merge"/>
		<mkdir dir="${src_govwayConfigApiRS}/schemi/merge/tmp"/>
		<copy todir="${src_govwayConfigApiRS}/schemi/merge/tmp">
			<fileset dir="${src_govwayConfigApiRS}/schemi">
				<exclude name="daEliminare.yaml"/>
				<include name="*.yaml"/>
			</fileset>
		</copy>

		<!-- Unifica l'interfaccia  -->
		<echo message="Dest [${src_govwayConfigApiRS}/schemi/merge/govway_rs-api_config.yaml]"/>
		<echo message="Source [${src_govwayConfigApiRS}/schemi/merge/tmp/govway_rs-api_config.yaml]"/>
		<echo message="Attach [${src_govwayConfigApiRS}/schemi/merge/tmp]"/>
		<java classname="org.openspcoop2.utils.openapi.UniqueInterfaceGenerator" fork="true">
	        	<arg value="OPEN_API_3" />
			<arg value="${src_govwayConfigApiRS}/schemi/merge/govway_rs-api_config.yaml" /> <!-- dest -->
			<arg value="${src_govwayConfigApiRS}/schemi/merge/tmp/govway_rs-api_config.yaml" /> <!-- master -->
			<arg value="${src_govwayConfigApiRS}/schemi/merge/tmp" />  <!-- attach dir -->
		        <classpath>
	        		<path refid="classpath_compile" />
				<path refid="classpath_dist" />
		        </classpath>
		</java>

		<delete dir="${src_govwayConfigApiRS}/schemi/merge/tmp"/>

	    	<antcall target="-swagger_codegen">
			<param name="swaggerCodeGen.inputSpec" value="${src_govwayConfigApiRS}/schemi/merge/govway_rs-api_config.yaml"/>
			<param name="swaggerCodeGen.package" value="org.openspcoop2.core.config.rs.server"/>
			<param name="swaggerCodeGen.packagePath" value="org/openspcoop2/core/config/rs/server"/>
			<param name="swaggerCodeGen.outputDir" value="${src_govwayConfigApiRS}"/>
			<param name="swaggerCodeGen.writeImpl" value="${overwriteImpl}"/>
			<param name="swaggerCodeGen.withXmlAnnotations" value="false"/>
			<param name="swaggerCodeGen.beanValidation" value="true"/>
			<param name="swaggerCodeGen.useGovwayTemplate" value="true"/>
		</antcall>

	</target>


</project>
