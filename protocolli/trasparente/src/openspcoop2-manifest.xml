<?xml version="1.0" encoding="UTF-8"?>
<openspcoop2 xmlns="http://www.openspcoop2.org/protocol/manifest">

    <protocol name="trasparente">
    	<factory>org.openspcoop2.protocol.trasparente.TrasparenteFactory</factory>
    </protocol>
    


    <binding default="rest">
    	<soap soap11="true" soap11_withAttachments="true" soap11_mtom="true"
    		  soap12="true" soap12_withAttachments="true" soap12_mtom="true">
    		<integrationError>
    			<internal>
    				<default httpReturnCode="500" messageType="soap" />
    			</internal>	
    			<external>
    				<default httpReturnCode="500" messageType="soap" />
    			</external>	
    		</integrationError>
    		<mediaTypeCollection>
    			<mediaType messageType="soap11">text/xml</mediaType>
    			<default messageType="soap12"/>
    		</mediaTypeCollection>
    	</soap>
    	<rest xml="true" json="true" 
    		  binary="true" mimeMultipart="true">
    		<integrationError>
    			<internal>
	    			<authentication httpReturnCode="401" messageType="sameAsRequest" />
	    			<authorization httpReturnCode="403" messageType="sameAsRequest" />
	    			<notFound httpReturnCode="404" messageType="sameAsRequest" />
	    			<badRequest httpReturnCode="400" messageType="sameAsRequest" />
	    			<internalError httpReturnCode="500" messageType="sameAsRequest" />
	    			<default httpReturnCode="500" messageType="xml" />
    			</internal>
    			<external>
	    			<authentication httpReturnCode="401" messageType="none" />
	    			<authorization httpReturnCode="403" messageType="none" />
	    			<notFound httpReturnCode="404" messageType="none" />
	    			<badRequest httpReturnCode="400" messageType="none" />
	    			<internalError httpReturnCode="500" messageType="none" />
	    			<default httpReturnCode="500" messageType="none" />
    			</external>
    		</integrationError>
    		<mediaTypeCollection>
    			<mediaType messageType="xml">text/xml</mediaType>
    			<mediaType messageType="xml">application/xml</mediaType>
    			<mediaType messageType="xml" regExpr="true">.*\+xml</mediaType>
    			<mediaType messageType="json">text/json</mediaType>
				<mediaType messageType="json">text/x-json</mediaType>
    			<mediaType messageType="json">application/json</mediaType>
    			<mediaType messageType="json">application/x-json</mediaType>
    			<mediaType messageType="json" regExpr="true">.*\+json</mediaType>
    			<mediaType messageType="mimeMultipart" regExpr="true">multipart\/related*</mediaType>
    			<default messageType="binary"/>
    			<undefined messageType="binary"/>
    		</mediaTypeCollection>
    	</rest>
    </binding>

    <web>
        <context name="api"/>

		<!-- Altri esempi -->
        <context name="soap" binding="soap">
        	<soapMediaTypeCollection>
    			<mediaType messageType="soap11">text/xml</mediaType>
    			<default messageType="soap12"/>
    		</soapMediaTypeCollection>
        </context>
        <context name="soap11" binding="soap">
        	<soapMediaTypeCollection>
    			<default messageType="soap11"/>
    		</soapMediaTypeCollection>
        </context>
        <context name="soap12" binding="soap">
        	<soapMediaTypeCollection>
    			<default messageType="soap12"/>
    		</soapMediaTypeCollection>
        </context>
        <context name="rest" binding="rest"/>
 		<context name="binary" binding="rest">
 			<restMediaTypeCollection>
 				<default messageType="binary"/>
 				<undefined messageType="binary"/>
 			</restMediaTypeCollection>
 		</context>

    </web>

    <registry>

        <organization>
            <types>
            	<type name="API"/>
            </types>
        </organization>

        <service>
            <types>
                <type name="SOAP" binding="soap"/>
                <type name="SOAP11" binding="soap">
	                <soapMediaTypeCollection>
		    			<default messageType="soap11"/>
		    		</soapMediaTypeCollection>
                </type>
                <type name="SOAP12" binding="soap">
	                <soapMediaTypeCollection>
		    			<default messageType="soap12"/>
		    		</soapMediaTypeCollection>
                </type>
                <type name="REST" binding="rest"/>
                <!--  Altri esempi -->
                <type name="XML" binding="rest">
                	<restMediaTypeCollection>
 						<default messageType="xml"/>
 						<undefined messageType="xml"/>
 					</restMediaTypeCollection>
                </type>
                <type name="JSON" binding="rest">
                	<restMediaTypeCollection>
 						<default messageType="json"/>
 						<undefined messageType="json"/>
 					</restMediaTypeCollection>
                </type>
				<type name="BINARY" binding="rest">
                	<restMediaTypeCollection>
 						<default messageType="binary"/>
 						<undefined messageType="binary"/>
 					</restMediaTypeCollection>
                </type>
            </types>
        </service>

        <versions>
        	<version name="1.0"/>
        </versions>

    </registry>

    <urlMapping type="PROPERTIES">
        <file>/trasparente-url-mapping.properties</file>
    </urlMapping>

</openspcoop2>
