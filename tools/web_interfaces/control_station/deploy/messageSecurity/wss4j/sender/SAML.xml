<config id="messageSecurity.wss4j.sender.saml" label="WSSec SAML Token" sortLabel="Z_SamlToken" xmlns="http://www.openspcoop2.org/core/mvc/properties"
	provider="org.openspcoop2.security.message.wss4j.SecurityProvider">

    <compatibility not="false" and="false">
            <tags and="true">
                    <tag>SOAP</tag>
                    <tag>REQUEST</tag>
                    <tag>OUT</tag>
            </tags>
            <tags and="true">
                    <tag>SOAP</tag>
                    <tag>RESPONSE</tag>
                    <tag>IN</tag>
            </tags>
    </compatibility>
	
	<properties>
		<collection name="samlPropRefId"/>
		<collection name="signaturePropRefId"/>
	</properties>
	
	<section label="Informazioni Generali">
		
		<item type="hidden" name="securityEngine" value="wss4j">
			<property name="securityEngine" force="true"/>
		</item>
		
		<item type="text" name="actor" label="Actor" required="false" validation="(.+)">
			<property name="actor" />
		</item>
		<item type="checkbox" name="mustUnderstand" label="MustUnderstand" defaultSelected="false">
			<property name="mustUnderstand" />
		</item>
		
	</section>

	<section label="SAML Assertion">
		
		<item type="select" name="samlVersion" label="Versione" default="2.0" reloadOnChange="true">
			<values>
				<value value="2.0" label="2.0"/>
				<value value="1.1" label="1.1"/>
				<value value="1.0" label="1.0"/>
			</values>
			<property name="openspcoop2.saml.version" properties="samlPropRefId" />
		</item>
		
		<item type="checkbox" name="authnStatement" label="Authentication Statement" reloadOnChange="true" defaultSelected="false">
			<property name="openspcoop2.saml.authn.statement.enabled" properties="samlPropRefId" />
		</item>

		<item type="checkbox" name="attributeStatement" label="Attribute Statement" reloadOnChange="true" defaultSelected="false">
			<property name="openspcoop2.saml.attribute.statement.enabled" properties="samlPropRefId" /> <!--  anche se di fatto non viene utilizzata dall'engine -->
		</item>

		<item type="checkbox" name="signatureActionChoice" label="Enveloped SAML Signature" reloadOnChange="true" defaultSelected="false">
			<property name="signatureActionChoice"/>
		</item>
		
		<subsection label="Issuer">
		
			<item type="text" name="issuerValue" label="Value" required="true">
				<property name="openspcoop2.saml.issuer.value" properties="samlPropRefId" />
			</item>
			<item type="text" name="issuerNameQualifier" label="Name Qualifier" required="false">
				<conditions>
					<condition>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.issuer.qualifier" properties="samlPropRefId" />
			</item>
			<item type="checkbox" name="issuerFormatCustomChoise" label="Format Personalizzato" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="issuerFormatCustomChoise" />
			</item>	
			<item type="select" name="issuerFormat2" label="Format" >
				<conditions>
					<condition and="true">
						<selected not="true" name="issuerFormatCustomChoise"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.issuer.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="issuerFormatCustom" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="issuerFormatCustomChoise"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.issuer.format" properties="samlPropRefId" />
			</item>
		
		</subsection>
		
		<subsection label="Conditions">
		
			<item type="number" name="conditionsDataNotBefore" label="NotBefore (minutes)" min="0" max="999999999" default="0"
				note="The time difference, in minutes, between creation and a time instant at which the assertion is valid">
				<property name="openspcoop2.saml.conditions.notBefore.minutes" properties="samlPropRefId" />
			</item>
			<item type="number" name="conditionsDataNotOnOrAfter" label="NotOnOrAfter (minutes)" min="0" max="999999999" default="60" 
				note="The time difference, in minutes, between creation and a time instant at which the assertion has expired ">
				<property name="openspcoop2.saml.conditions.notOnOrAfter.minutes" properties="samlPropRefId" />
			</item>
		
			<item type="text" name="conditionsAudienceURI" label="AudienceURI" required="false">
				<property name="openspcoop2.saml.conditions.audienceURI" properties="samlPropRefId" />
			</item>	
			
		</subsection>
		
	</section>

	<section label="SAML Subject">
		
		<item type="text" name="subjectValue" label="Value" required="true">
			<property name="openspcoop2.saml.subject.nameID.value" properties="samlPropRefId" />
		</item>
		<item type="text" name="subjectNameQualifier" label="Name Qualifier" required="false">
			<property name="openspcoop2.saml.subject.nameID.qualifier" properties="samlPropRefId" />
		</item>
		<item type="checkbox" name="subjectFormatCustomChoise" label="Custom Format" defaultSelected="false" reloadOnChange="true">
			<property name="subjectFormatCustomChoise" />
		</item>	
		<item type="select" name="subjectFormat2" label="Format" >
			<conditions>
				<condition and="true">
					<selected not="true" name="subjectFormatCustomChoise"/>
					<equals name="samlVersion" value="2.0"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.subject.nameID.format" properties="samlPropRefId" />
		</item>
		<item type="select" name="subjectFormat1" label="Format" >
			<conditions>
				<condition and="true">
					<selected not="true" name="subjectFormatCustomChoise"/>
					<equals not="true" name="samlVersion" value="2.0"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.subject.nameID.format" properties="samlPropRefId" />
		</item>
		<item type="text" name="subjectFormatCustom" label="Format" required="true">
			<conditions>
				<condition and="true">
					<selected name="subjectFormatCustomChoise"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.subject.nameID.format" properties="samlPropRefId" />
		</item>

		
		<subsection label="Confirmation Method">
			
			<item type="checkbox" name="subjectConfirmationMethodCustomChoise" label="Custom Method" defaultSelected="false" reloadOnChange="true">
				<property name="subjectConfirmationMethodCustomChoise" />
			</item>	
			<item type="select" name="subjectConfirmationMethod1" label="Method" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<selected not="true" name="subjectConfirmationMethodCustomChoise"/>
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.method" properties="samlPropRefId" />
			</item>
			<item type="select" name="subjectConfirmationMethod2" label="Method" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<selected not="true" name="subjectConfirmationMethodCustomChoise"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.method" properties="samlPropRefId" />
			</item>
			<item type="text" name="subjectConfirmationMethodCustom" label="Method" required="true">
				<conditions>
					<condition and="true">
						<selected name="subjectConfirmationMethodCustomChoise"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.method" properties="samlPropRefId" />
			</item>
			
			<item type="hidden" name="signatureSamlSubjectConfirmationSenderVouches" value="true">
				<conditions>
					<condition and="false">
						<equals name="subjectConfirmationMethod1" value="SENDER_VOUCHES"/>
						<equals name="subjectConfirmationMethod2" value="SENDER_VOUCHES"/>
					</condition>
				</conditions>
				<property name="signatureSamlSubjectConfirmationSenderVouches" />
			</item>
			<item type="hidden" name="signatureSamlSubjectConfirmationHolderOfKey" value="true">
				<conditions>
					<condition and="false">
						<equals name="subjectConfirmationMethod1" value="HOLDER_OF_KEY"/>
						<equals name="subjectConfirmationMethod2" value="HOLDER_OF_KEY"/>
					</condition>
				</conditions>
				<property name="signatureSamlSubjectConfirmationHolderOfKey" />
			</item>
			
			<item type="hidden" name="signatureActionSigned" value="SAMLTokenUnsigned"> <!--  Devo comunque usare come azione unsigned: value="SAMLTokenSigned" -->
				<conditions>
					<condition>
						<selected name="signatureActionChoice"/>
					</condition>
					<condition not="true" and="false">
						<equals name="signatureSamlSubjectConfirmationSenderVouches" value="true"/>
						<equals name="signatureSamlSubjectConfirmationHolderOfKey" value="true"/>
					</condition>
				</conditions>
				<property name="action" />
			</item>
			<item type="hidden" name="signatureActionUnsigned" value="SAMLTokenUnsigned">
				<conditions>
					<condition not="true">
						<selected name="signatureActionChoice"/>
					</condition>
					<condition not="true" and="false">
						<equals name="signatureSamlSubjectConfirmationSenderVouches" value="true"/>
						<equals name="signatureSamlSubjectConfirmationHolderOfKey" value="true"/>
					</condition>
				</conditions>
				<property name="action" />
			</item>
			<item type="hidden" name="signatureActionSignedConfirmation" value="SAMLTokenUnsigned Signature"> <!--  Devo comunque usare come azione unsigned: value="SAMLTokenSigned" -->
				<conditions>
					<condition>
						<selected name="signatureActionChoice"/>
					</condition>
					<condition and="false">
						<equals name="signatureSamlSubjectConfirmationSenderVouches" value="true"/>
						<equals name="signatureSamlSubjectConfirmationHolderOfKey" value="true"/>
					</condition>
				</conditions>
				<property name="action" />
			</item>
			<item type="hidden" name="signatureActionUnsignedConfirmation" value="SAMLTokenUnsigned Signature">
				<conditions>
					<condition not="true">
						<selected name="signatureActionChoice"/>
					</condition>
					<condition and="false">
						<equals name="signatureSamlSubjectConfirmationSenderVouches" value="true"/>
						<equals name="signatureSamlSubjectConfirmationHolderOfKey" value="true"/>
					</condition>
				</conditions>
				<property name="action" />
			</item>
			
		</subsection>
		
		<subsection label="Confirmation Data">
		
			<item type="select" name="confirmationtTimeMode" label="Date" default="default" reloadOnChange="true">
				<values>
					<value value="default" label="Default"/>
					<value value="minutes" label="Minutes from Creation Time"/>
					<!-- <value value="custom" label="Configurazione Manuale"/>  va implementata proprio nell'engine come fatto per la'uthentitcation statement -->
				</values>
				<property name="confirmationtTimeMode" />
			</item>
			<item type="number" name="confirmationDataNotBefore" label="NotBefore (minutes)" min="0" max="999999999" default="0"
				note="The time difference, in minutes, between creation and a time instant before which the subject cannot be confirmed">
				<conditions>
					<condition>
						<equals name="confirmationtTimeMode" value="minutes"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.data.notBefore.minutes" properties="samlPropRefId" />
			</item>
			<item type="number" name="confirmationDataNotOnOrAfter" label="NotOnOrAfter (minutes)" min="0" max="999999999" default="60" 
				note="The time difference, in minutes, between creation and a time instant before which the subject ca no longer be confirmed ">
				<conditions>
					<condition>
						<equals name="confirmationtTimeMode" value="minutes"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.data.notOnOrAfter.minutes" properties="samlPropRefId" />
			</item>
		
			<item type="text" name="subjectConfirmationDataAddress" label="Address" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.data.address" properties="samlPropRefId" />
			</item>	
			<item type="text" name="subjectConfirmationDataInResponseTo" label="InResponseTo" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.data.inResponseTo" properties="samlPropRefId" />
			</item>	
			<item type="text" name="subjectConfirmationDataRecipient" label="Recipient" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.subject.confirmation.data.recipient" properties="samlPropRefId" />
			</item>		

		</subsection>
		

	</section>

	<section label="SAML Authentication Statement">

		<conditions>
			<condition>
				<selected name="authnStatement"/>
			</condition>
		</conditions>

		<item type="select" name="authnStatementTimeMode" label="Date" default="default" reloadOnChange="true">
			<values>
				<value value="default" label="Default"/>
				<value value="minutes" label="Minutes from Creation Time"/>
				<value value="custom" label="Configurazione Manuale"/>
			</values>
			<property name="authnStatementTimeMode" />
		</item>
		
		<item type="number" name="authnStatementDataNotBefore" label="NotBefore (minutes)" min="-999999999" max="999999999" default="0"
			note="The time difference, in minutes, from creation time">
			<conditions>
				<condition>
					<equals name="authnStatementTimeMode" value="minutes"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.instant.minutes" properties="samlPropRefId" />
		</item>
		<item type="number" name="authnStatementDataNotOnOrAfter" label="NotOnOrAfter (minutes)" min="-999999999" max="999999999" default="60" 
			note="The time difference, in minutes, from creation time">
			<conditions>
				<condition>
					<equals name="authnStatementTimeMode" value="minutes"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.notOnOrAfter.minutes" properties="samlPropRefId" />
		</item>
		
		<item type="text" name="authnStatementDataNotBeforeFormat" label="NotBefore (date format)" required="true">
			<conditions>
				<condition and="true">
					<equals name="authnStatementTimeMode" value="custom"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.instant.minutes.format" properties="samlPropRefId" />
		</item>	
		<item type="text" name="authnStatementDataNotBeforeValue" label="NotBefore" required="true">
			<conditions>
				<condition and="true">
					<equals name="authnStatementTimeMode" value="custom"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.instant.minutes.value" properties="samlPropRefId" />
		</item>	
		<item type="text" name="authnStatementDataNotOnOrAfterFormat" label="NotOnOrAfter (date format)" required="true">
			<conditions>
				<condition and="true">
					<equals name="authnStatementTimeMode" value="custom"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.notOnOrAfter.minutes.format" properties="samlPropRefId" />
		</item>	
		<item type="text" name="authnStatementDataNotOnOrAfterValue" label="NotOnOrAfter" required="true">
			<conditions>
				<condition and="true">
					<equals name="authnStatementTimeMode" value="custom"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn.statement.notOnOrAfter.minutes.value" properties="samlPropRefId" />
		</item>
		
		<item type="checkbox" name="authnContextClassRefCustomChoise" label="Custom Method" defaultSelected="false" reloadOnChange="true">
			<property name="authnContextClassRefCustomChoise" />
		</item>	
		<item type="select" name="authnContextClassRef1" label="Method" reloadOnChange="true">
			<conditions>
				<condition and="true">
					<selected not="true" name="authnContextClassRefCustomChoise"/>
					<equals not="true" name="samlVersion" value="2.0"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn" properties="samlPropRefId" />
		</item>
		<item type="select" name="authnContextClassRef2" label="Method" reloadOnChange="true">
			<conditions>
				<condition and="true">
					<selected not="true" name="authnContextClassRefCustomChoise"/>
					<equals name="samlVersion" value="2.0"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn" properties="samlPropRefId" />
		</item>
		<item type="text" name="authnContextClassRefCustom" label="Method" required="true">
			<conditions>
				<condition and="true">
					<selected name="authnContextClassRefCustomChoise"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.authn" properties="samlPropRefId" />
		</item>
		
		<subsection label="Subject Locality">
		
			<item type="text" name="authnSubjectLocalityIPAddress" label="IP Address" required="false">
				<property name="openspcoop2.saml.authn.subjectLocality.ipAddress" properties="samlPropRefId" />
			</item>
			<item type="text" name="authnSubjectLocalityDNSAddress" label="DNS Address" required="false">
				<property name="openspcoop2.saml.authn.subjectLocality.dnsAddress" properties="samlPropRefId" />
			</item>
			
		</subsection>

	</section>
	
	<section label="SAML Attribute Statement">

		<conditions>
			<condition>
				<selected name="attributeStatement"/>
			</condition>
		</conditions>
		
		<item type="select" name="attributeStatementNumber" label="Numero di Attributi" default="01" reloadOnChange="true">
			<values>
				<value value="01" label="1" />
				<value value="02" label="2" />
				<value value="03" label="3" />
				<value value="04" label="4" />
				<value value="05" label="5" />
				<value value="06" label="6" />
				<value value="07" label="7" />
				<value value="08" label="8" />
				<value value="09" label="9" />
				<value value="10" label="10" />
			</values>
			<property name="attributeStatementNumber" />
		</item>
		
		<subsection label="Attribute N.1">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="01"/>
				</condition>
			</conditions>
		
			<item type="text" name="attributeStatementNameQualifiedForSAML11_1" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_1" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_1" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_1" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_1" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_1" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.values.separator" properties="samlPropRefId" />
			</item>			
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_1" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_1" />
			</item>	
			<item type="select" name="attributeStatementFormat_1" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_1"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_1" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_1"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_1.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>


		<subsection label="Attribute N.2">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="02"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_2" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_2" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_2" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_2" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_2" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_2" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_2" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_2" />
			</item>	
			<item type="select" name="attributeStatementFormat_2" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_2"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_2" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_2"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_2.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.3">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="03"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_3" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_3" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_3" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_3" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_3" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_3" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_3" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_3" />
			</item>	
			<item type="select" name="attributeStatementFormat_3" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_3"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_3" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_3"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_3.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.4">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="04"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_4" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_4" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_4" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_4" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_4" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_4" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_4" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_4" />
			</item>	
			<item type="select" name="attributeStatementFormat_4" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_4"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_4" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_4"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_4.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.5">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="05"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_5" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_5" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_5" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_5" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_5" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_5" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_5" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_5" />
			</item>	
			<item type="select" name="attributeStatementFormat_5" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_5"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_5" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_5"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_5.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.6">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="06"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_6" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_6" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_6" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_6" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_6" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_6" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_6" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_6" />
			</item>	
			<item type="select" name="attributeStatementFormat_6" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_6"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_6" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_6"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_6.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.7">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="07"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_7" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_7" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_7" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_7" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_7" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_7" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_7" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_7" />
			</item>	
			<item type="select" name="attributeStatementFormat_7" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_7"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_7" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_7"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_7.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.8">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="08"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_8" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_8" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_8" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_8" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_8" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_8" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_8" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_8" />
			</item>	
			<item type="select" name="attributeStatementFormat_8" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_8"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_8" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_8"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_8.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.9">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="09"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_9" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_9" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_9" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_9" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_9" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_9" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_9" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_9" />
			</item>	
			<item type="select" name="attributeStatementFormat_9" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_9"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_9" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_9"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_9.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>
		
		<subsection label="Attribute N.10">
		
			<conditions>
				<condition>
					<lessEquals name="attributeStatementNumber" value="10"/>
				</condition>
			</conditions>
					
			<item type="text" name="attributeStatementNameQualifiedForSAML11_10" label="Name Qualified" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML11_10" label="Name Simple" required="true">
				<conditions>
					<condition and="true">
						<equals not="true" name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.simple" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameQualifiedForSAML20_10" label="Name Qualified" required="false">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.qualified" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementNameSimpleForSAML20_10" label="Name Simple" required="false"
				note="SAML 2.0 require almost one name between simple and qualified">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.simple" properties="samlPropRefId" />
			</item>
			
			<item type="text" name="attributeStatementValues_10" label="Value(s)" required="true"
				note="Use separator char for define more than one value">
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.values" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementSeparator_10" label="Separator" required="true" default=",">
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.values.separator" properties="samlPropRefId" />
			</item>
			
			<item type="checkbox" name="attributeStatementFormatCustomChoise_10" label="Custom Format" defaultSelected="false" reloadOnChange="true">
				<conditions>
					<condition and="true">
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="attributeStatementFormatCustomChoise_10" />
			</item>	
			<item type="select" name="attributeStatementFormat_10" label="Format">
				<conditions>
					<condition and="true">
						<selected not="true" name="attributeStatementFormatCustomChoise_10"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.format" properties="samlPropRefId" />
			</item>
			<item type="text" name="attributeStatementFormatCustom_10" label="Format" required="true">
				<conditions>
					<condition and="true">
						<selected name="attributeStatementFormatCustomChoise_10"/>
						<equals name="samlVersion" value="2.0"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.attribute.statement.ATTR_10.name.format" properties="samlPropRefId" />
			</item>
			
		</subsection>

	</section>

	<section label="Signature">

		<conditions and="false">
			<condition>
				<selected name="signatureActionChoice"/>
			</condition>
			<condition and="false">
				<equals name="subjectConfirmationMethod1" value="SENDER_VOUCHES"/>
				<equals name="subjectConfirmationMethod2" value="SENDER_VOUCHES"/>
			</condition>
			<condition and="false">
				<equals name="subjectConfirmationMethod1" value="HOLDER_OF_KEY"/>
				<equals name="subjectConfirmationMethod2" value="HOLDER_OF_KEY"/>
			</condition>
		</conditions>
		
		<item type="hidden" name="signatureEnabled" value="true"> <!-- serve ad abilitare la firma dentro la SAML -->
			<conditions>
				<condition>
					<selected name="signatureActionChoice"/>
				</condition>
			</conditions>
			<property name="openspcoop2.saml.assertion.sign" properties="samlPropRefId" />
		</item>
		
		<item type="hidden" name="signaturePropRefId_convertParamsIntoSamlPropRefId" value="samlPropRefId">
			<conditions>
				<condition>
					<selected name="signatureActionChoice"/>
				</condition>
			</conditions>
			<property name="signaturePropRefId_convertParamsIntoSamlPropRefId" />
		</item>
		<item type="hidden" name="signaturePropRefId_convertParamsIntoSamlPropRefId_holderOfKey" value="samlPropRefId">
			<conditions and="false">
				<condition and="false">
					<equals name="subjectConfirmationMethod1" value="HOLDER_OF_KEY"/>
					<equals name="subjectConfirmationMethod2" value="HOLDER_OF_KEY"/>
				</condition>
			</conditions>
			<property name="signaturePropRefId_convertParamsIntoSamlPropRefId_holderOfKey" />
		</item>
		
		<item type="select" name="signatureAlgorithm" label="Signature Algorithm">
			<property name="signatureAlgorithm" />
		</item>
		<item type="select" name="signatureDigestAlgorithm" label="Digest Algorithm">
			<property name="signatureDigestAlgorithm" />
		</item>
		<item type="select" name="signatureC14nAlgorithmExclusive" label="Canonicalization Algorithm"> <!-- Devo usare exclusive altrimenti la validazione fallisce della SAML Enveloped -->
			<property name="signatureC14nAlgorithmExclusive" />
		</item>	

		<item type="hidden" name="signaturePartsBody" value="{Element}{SOAP_TEMPLATE_NS}Body; {Element}{SAML_TEMPLATE_NS}Assertion">
			<conditions and="false">
				<condition and="false">
					<equals name="subjectConfirmationMethod1" value="SENDER_VOUCHES"/>
					<equals name="subjectConfirmationMethod2" value="SENDER_VOUCHES"/>
				</condition>
				<condition and="false">
					<equals name="subjectConfirmationMethod1" value="HOLDER_OF_KEY"/>
					<equals name="subjectConfirmationMethod2" value="HOLDER_OF_KEY"/>
				</condition>
			</conditions>
		    <property name="signatureParts" />
		</item>

		<subsection label="Key Identifier - Enveloped SAML Signature">

			<item type="checkbox" name="sendKey" label="Send Key" defaultSelected="true">
				<conditions>
					<condition>
						<selected name="signatureActionChoice"/>
					</condition>
				</conditions>
				<property name="openspcoop2.saml.assertion.sign.sendKeyValue" selectedValue="true" unselectedValue="false" properties="samlPropRefId" />
			</item>	
			
		</subsection>
			
		<subsection label="Key Identifier - External Signature">

			<conditions and="false">
				<condition and="false">
					<equals name="subjectConfirmationMethod1" value="SENDER_VOUCHES"/>
					<equals name="subjectConfirmationMethod2" value="SENDER_VOUCHES"/>
				</condition>
				<condition and="false">
					<equals name="subjectConfirmationMethod1" value="HOLDER_OF_KEY"/>
					<equals name="subjectConfirmationMethod2" value="HOLDER_OF_KEY"/>
				</condition>
			</conditions>

			<item type="select" name="signatureKeyIdentifier" label="Tipo" reloadOnChange="true" default="DirectReference" >
			<!--   note="Per maggiori dettagli vedi: http://coheigea.blogspot.com/2013/03/signature-and-encryption-key.html"> -->
				<values>
					<value value="DirectReference" label="DirectReference"/>
					<value value="IssuerSerial" label="IssuerSerial"/>
					<value value="X509KeyIdentifier" label="X509KeyIdentifier"/>
					<value value="SKIKeyIdentifier" label="SKIKeyIdentifier"/>
					<value value="EmbeddedKeyName" label="EmbeddedKeyName"/>
					<value value="Thumbprint" label="Thumbprint"/>
					<value value="EncryptedKeySHA1" label="EncryptedKeySHA1"/>
					<value value="KeyValue" label="KeyValue"/>
				</values>
				<property name="signatureKeyIdentifier" />
			</item>
			<item type="checkbox" name="useSingleCertificate" label="Certificato Singolo" defaultSelected="true">
				<property name="useSingleCertificate" selectedValue="true" unselectedValue="false"/>
			</item>
			<item type="checkbox" name="includeSignatureToken" label="Include Signature Token" defaultSelected="false">
				<conditions>
		            <condition and="false">
		            	<equals name="signatureKeyIdentifier" value="IssuerSerial" />
		            	<equals name="signatureKeyIdentifier" value="Thumbprint" />
		            	<equals name="signatureKeyIdentifier" value="SKIKeyIdentifier" />
		            </condition>
	           	</conditions>
				<property name="includeSignatureToken" selectedValue="true" unselectedValue="false"/>
			</item>

		</subsection>

		<subsection label="KeyStore">

			<item type="hidden" name="signatureCryptoProvider" value="org.apache.ws.security.components.crypto.Merlin">
				<property name="org.apache.ws.security.crypto.provider" force="true" properties="signaturePropRefId"/>
			</item>

			<item type="select" name="keystoreType" label="Tipo" default="jks">
				<values>
					<value value="jks" label="JKS"/>
					<value value="pkcs12" label="PKCS12"/>
					<!--  <value value="jceks" label="JCEKS"/> -->
				</values>
				<property name="org.apache.ws.security.crypto.merlin.keystore.type" properties="signaturePropRefId" />
			</item>
			<item type="text" name="keystoreFile" label="File" required="true">
			      	<property name="org.apache.ws.security.crypto.merlin.file" properties="signaturePropRefId" />
			</item>
			<item type="text" name="keystorePassword" label="Password" required="true">
			      	<property name="org.apache.ws.security.crypto.merlin.keystore.password" properties="signaturePropRefId" />
			</item>
			<item type="text" name="keystorePrivateKeyAlias" label="Alias Chiave Privata" required="true">
			      	<property name="signatureUser" />
			</item>
			<item type="text" name="keystorePrivateKeyPassword" label="Password Chiave Privata" required="true">
			      	<property name="signaturePassword" />
			</item>
			<item type="hidden" name="keystorePrivateKeyPasswordCallback" value="true">
			      	<property name="passwordCallbackRef" />
			</item>
			

		</subsection>

	</section>

</config>



