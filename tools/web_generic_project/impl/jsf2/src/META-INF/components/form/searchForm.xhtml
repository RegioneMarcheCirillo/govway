
<!DOCTYPE ui:component
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:op2web="http://www.openspcoop2.org/web/taglib/jsf2" xmlns:c="http://java.sun.com/jsp/jstl/core">
	<f:loadBundle var="commonsMsg" basename="commonsMessages"/>

	<c:set var="formId" value="#{searchBean.id}"/>
	<c:set var="isClosable" value="#{searchBean.closable}"/>
	<c:set var="formTitle" value="#{searchBean.nomeForm}"/>
	<c:set var="rendered" value="#{searchBean.rendered}"/>
	<c:set var="renderRegionOnly" value="#{searchBean.renderRegionOnly}"/>
		
	<c:if test="#{empty formStyleClass}">
		<c:set var="formStyleClass" value="form-container"/>
	</c:if>
	
	<c:if test="#{empty showNotaCampiObbligatori}">
		<c:set var="showNotaCampiObbligatori" value="#{searchBean.showNotaCampiObbligatori}"/>
	</c:if>
	
	
	<c:if test="#{isClosable == false and empty formTitle and rendered == true}">
		<div class="#{formStyleClass} noborder nopadding nomargin">
			<h:form id="#{formId}" prependId="false" execute="@this" ajaxSubmit="true">
				<a4j:region id="#{formId}_regionSearchPnl">
					<a4j:outputPanel id="#{formId}_searchPnl" ajaxRendered="false" layout="block">

						<ui:insert/>

					</a4j:outputPanel>
				</a4j:region>
				<h:panelGroup layout="block" styleClass="buttonrow">
					<ui:insert name="buttons"/>
				</h:panelGroup>
			</h:form>
		</div>
	</c:if>

	<c:if test="#{isClosable == false and !empty formTitle and rendered == true}">
		<rich:panel id="panel_#{formId}" bodyClass="nopadding" styleClass="nopadding">
			<f:facet name="header">
				<h:outputText id="outHeaderSearch_#{formId}" value="#{formTitle}"/>
			</f:facet>

			<div class="#{formStyleClass} noborder">
				<h:form id="#{formId}" prependId="false" execute="@this" ajaxSubmit="true">
					<a4j:region id="#{formId}_regionSearchPnl">
						<a4j:outputPanel id="#{formId}_searchPnl" ajaxRendered="false" layout="block">

							<ui:insert/>

						</a4j:outputPanel>
					</a4j:region>
					<h:panelGroup layout="block" styleClass="buttonrow">
						<ui:insert name="buttons"/>
					</h:panelGroup>
				</h:form>
			</div>
		</rich:panel>
	</c:if>

	<c:if test="#{isClosable == true and empty formTitle and rendered == true}">
		<rich:collapsiblePanel xmlns="" id="panel_#{formId}" opened="true" label="#{commonsMsg['ricerca.header']}" switchType="ajax" bodyClass="nopadding" styleClass="nopadding">

			<div class="#{formStyleClass} noborder">
				<h:form id="#{formId}" prependId="false" execute="@this" ajaxSubmit="true">
					<a4j:region id="#{formId}_regionSearchPnl">
						<a4j:outputPanel id="#{formId}_searchPnl" ajaxRendered="false" layout="block">

							<ui:insert/>

						</a4j:outputPanel>
					</a4j:region>
					<h:panelGroup layout="block" styleClass="buttonrow">
						<ui:insert name="buttons"/>
					</h:panelGroup>
				</h:form>
			</div>
		</rich:collapsiblePanel>
	</c:if>

	<c:if test="#{isClosable == true and !empty formTitle and rendered == true}">
		<rich:collapsiblePanel xmlns="" id="panel_#{formId}" opened="true" label="#{formTitle}" switchType="ajax" bodyClass="nopadding" styleClass="nopadding">

			<div class="#{formStyleClass} noborder">
				<h:form id="#{formId}" prependId="false" execute="@this" ajaxSubmit="true">
					<a4j:region id="#{formId}_regionSearchPnl">
						<a4j:outputPanel id="#{formId}_searchPnl" ajaxRendered="false" layout="block">

							<ui:insert/>

						</a4j:outputPanel>
					</a4j:region>
					<h:panelGroup layout="block" styleClass="buttonrow">
						<ui:insert name="buttons"/>
					</h:panelGroup>
				</h:form>
			</div>
		</rich:collapsiblePanel>
	</c:if>
</ui:component>