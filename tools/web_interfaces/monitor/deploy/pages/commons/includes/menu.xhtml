<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core">
	<c:if test="#{applicationBean.user}">
		<a4j:outputPanel>
			<script type="text/javascript">
			//<![CDATA[
			 jQuery(document).ready(preventCollapse);
			 
			 function preventCollapse(){
				 
				var idGruppi = [];
				for(key in PanelMenuStorage) { 
					var item = PanelMenuStorage[key]; 
					var itemName = item.name;  
					if(itemName && itemName.endsWith('Group')) { 
						 item.collapse = function (){} 
					}
				}
			 }
			 //]]>	
			</script>
			<rich:panel headerClass="outpanelHeader" id="menuct" rendered="#{loginBean.loggedIn}">
				<a4j:form id="transazioniForm">
					<h:inputHidden value="true" id="tf_usaSVG"/> 
					<rich:panelMenu expandMode="none" mode="server">
						<rich:panelMenuGroup label="Monitoraggio" expanded="true" id="monitoraggioMenuGroup"
							rendered="#{applicationBean.showTransazioniBase}">
							<rich:panelMenuItem id="transazioniMenuLink" label="Storico" action="#{transazioniBean.submit}" actionListener="#{transazioniBean.search.initSearchListener}" />
							
							<rich:panelMenuItem label="Live" id="live" action="#{transazioniBean.submit}" actionListener="#{transazioniBean.search.initSearchListener}" 
									rendered="#{applicationBean.showTransazioniLive}">
								<f:setPropertyActionListener value="Live" target="#{searchFormTransazioni.periodo}" />
							</rich:panelMenuItem>
							
							<rich:panelMenuItem label="Esiti Live" action="esitiLive" id="esiti_live"
								rendered="#{applicationBean.showEsitiLive}" />
					 
					 		<rich:panelMenuItem label="Eventi" action="eventi" 
								rendered="#{applicationBean.showEventi}"
								actionListener="#{eventiBean.search.initSearchListener}"/>
					 
							<rich:panelMenuItem label="Allarmi" action="allarmi" id="statoAllarmiLnk"
								rendered="#{applicationBean.showAllarmi}"
								actionListener="#{allarmiBean.search.menuClickSearchListener}"
								/>
								
							<!-- 
							<rich:panelMenuItem label="Sonde Applicative" action="sondeApplicative" 
								rendered="#{applicationBean.showSonde}"/>
							-->
							 
							<rich:panelMenuItem id="processiMenuLink" label="Processi"
								action="processi" rendered="#{applicationBean.showProcessi}"
								actionListener="#{searchFormProcessi.initSearchListener}" />
							<rich:panelMenuGroup label="Statistiche" expanded="false"
								iconCollapsed="triangle" iconExpanded="triangleDown"
								rendered="false">
								<rich:panelMenuItem label="Stat Processi A" />
								<rich:panelMenuItem label="Stat Processi B" />
								<rich:panelMenuItem label="Stat Processi C" />
							</rich:panelMenuGroup>
							
						</rich:panelMenuGroup>
						<!-- iconExpanded="triangleDown" -->
						<rich:panelMenuGroup iconCollapsed="triangle" label="Reportistica" id="reportisticaMenuGroup"
							expanded="true" rendered="#{applicationBean.showStatisticheBase}">
							<rich:panelMenuItem label="Analisi Statistica" action="analisiStatistica" 
								actionListener="#{analisiStatisticaBean.menuActionListener}"
								/>
							<rich:panelMenuItem
								label="Analisi Log" rendered="#{applicationBean.showReport}"
								action="#{reportBean.submit}"
								actionListener="#{reportBean.search.initSearchListener}" />
							<rich:panelMenuItem
								label="Configurazione Servizi" rendered="#{applicationBean.showStatisticheConfigurazioniGenerali}"
								action="#{configurazioniGeneraliBean.submit}"
								actionListener="#{configurazioniGeneraliBean.search.initSearchListener}" />
						</rich:panelMenuGroup>
					</rich:panelMenu>
				</a4j:form>
				<a4j:form>
					<rich:panelMenu expandMode="none" mode="server">
						<rich:panelMenuGroup label="Configurazione" expanded="true" id="configurazioneMenuGroup"
							rendered="#{applicationBean.showSezioneConfigurazione}">
							
								<rich:panelMenuItem label="Utenti" action="user" 
									rendered="#{applicationBean.showUserManagement}"/>
															
								<rich:panelMenuItem label="Allarmi" action="configurazioneAllarmi" id="confAllarmiLnk"
									actionListener="#{allarmiBean.search.menuClickSearchListener}"
									rendered="#{applicationBean.showConfigurazioneAllarmi}"/>
									
								<rich:panelMenuItem label="Sonde Applicative" action="sonde"
									actionListener="#{sondeBean.search.initSearchListener}" 
									rendered="#{applicationBean.showConfigurazioneSonde}" />
									
								<rich:panelMenuItem label="Archiviazione Dati" action="dump"
									rendered="#{applicationBean.showAnalisiContenuti}" />
									
								<rich:panelMenuItem label="Analisi Dati" action="configurazioneServizi"
									rendered="#{applicationBean.showConfigurazioneLibreria}"
									actionListener="#{configurazioneServiziBean.search.initSearchListener}" />
									
								<rich:panelMenuItem label="Processi" action="configProcessi"
									rendered="#{applicationBean.showConfigurazioneProcessi}" />
									
								<rich:panelMenuItem label="Auditing" action="auditing" rendered="#{applicationBean.showAuditing}"/>
						
						</rich:panelMenuGroup>	
						
					</rich:panelMenu>
				</a4j:form>
			</rich:panel>
		</a4j:outputPanel>
	</c:if>
</ui:composition>
