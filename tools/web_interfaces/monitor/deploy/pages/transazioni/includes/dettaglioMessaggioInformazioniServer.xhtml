<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:link="http://www.link.it"
    xmlns:c="http://java.sun.com/jstl/core">
    <f:loadBundle var="msg" basename="messages" /> 
    
    <a4j:outputPanel layout="block" id="informazioniServer">
    	
    	<a4j:outputPanel id="outPanelInformazioniGenerali4" ajaxRendered="false"  layout="block" styleClass="form-container">
    		
    		
    		<style>
    			#tableConsegne_tbl { width: 100%; table-layout: fixed; overflow-wrap: break-word; }
    			#tableConsegne_tbl tr.rich-table-header {
    				display: none;
    			}
    			th[id$="colEsitoImgheader"] { width:40px; }
    		
    		</style>
    	
			<link:simpleDataTable value="#{dettagliBean.listaConsegne}" id="tableConsegne" enableDelete="false" showSelectAll="false">
				<rich:column id="colEsitoImg" sortable="false" label="Esito (Immagine)" style="text-align: center; width:40px;">
					<f:facet name="header">
						<h:graphicImage value="/images/tema_link/circle_light_grey.png" />
					</f:facet>
					<h:graphicImage id="outEsitoImgOk" value="/images/tema_link/verified_green.png" rendered="#{item.esitoOk}">
						<rich:toolTip for="outEsitoImgOk">
							<h:outputText value="#{item.esitoLabel}" />
						</rich:toolTip>
					</h:graphicImage>
					<h:graphicImage id="outEsitoImgFaultApplicativo" value="/images/tema_link/alert_yellow.png" rendered="#{item.esitoFaultApplicativo}">
						<rich:toolTip for="outEsitoImgFaultApplicativo">
							<h:outputText value="#{item.esitoLabel}" />
						</rich:toolTip>
					</h:graphicImage>
					<h:graphicImage id="outEsitoImgKo" value="/images/tema_link/alert_red.png" rendered="#{item.esitoKo}">
						<rich:toolTip for="outEsitoImgKo">
							<h:outputText value="#{item.esitoLabel}" />
						</rich:toolTip>
					</h:graphicImage>
					<h:graphicImage id="outEsitoImgOther" value="/images/tema_link/ko_red.png" rendered="#{!item.esitoOk and !item.esitoFaultApplicativo and !item.esitoKo}"/>
				</rich:column>
				<rich:column id="colCustomContent" sortable="false" label="Transazione">
					<f:facet name="header">
						<h:outputText id="outCustomContent1" value="Transazione" />
					</f:facet>
					<a4j:outputPanel layout="block" id="entry" styleClass="entryApi">
						<a4j:outputPanel layout="block" id="titolo" styleClass="titoloEntry">
							<a4j:htmlCommandLink id="details-iconLink" styleClass="icon-details" action="dettagliMessaggio">
								<f:setPropertyActionListener value="#{item.idTransazione}" target="#{dettagliBean.idTransazione}"/>
								<f:setPropertyActionListener value="#{item.idMessaggioRichiesta}" target="#{dettagliBean.idEgov}"/>
								<f:setPropertyActionListener value="#{item.pddCodice}" target="#{dettagliBean.identificativoPorta}"/>
								<c:if test="#{not empty processiDettagliBean}">
									<f:setPropertyActionListener value="#{selectedProcesso}" target="#{processiDettagliBean.selectedProcesso}"/>
								</c:if>				
								
								<h:outputText id="outDataIngRich2" value="#{item.dataIngressoRichiesta}">
									<f:convertDateTime  pattern="yyyy-MM-dd HH:mm:ss"
										timeZone="Europe/Rome" />
								</h:outputText>
								<rich:toolTip for="outDataIngRich2">
									<h:outputText  value="#{item.dataIngressoRichiesta}">
										<f:convertDateTime  pattern="yyyy-MM-dd HH:mm:ss.SSS" timeZone="Europe/Rome" />
									</h:outputText>
								</rich:toolTip>
							</a4j:htmlCommandLink>
							
							<rich:spacer width="12" rendered="#{not empty item.servizio}"/>
							<h:outputText id="outServ2" value="#{item.servizio}" rendered="#{item.pddRuolo!='INTEGRATION_MANAGER' and not empty item.nomeServizio}"  styleClass="titoloEntry"/>
							<rich:toolTip for="outServ2" value="#{item.servizio}" rendered="#{item.pddRuolo!='INTEGRATION_MANAGER' and not empty item.nomeServizio}"/>
							<h:outputText id="outServ3" value="[IM] #{item.servizioApplicativoErogatore}" rendered="#{item.pddRuolo=='INTEGRATION_MANAGER'}"  styleClass="titoloEntry"/>
							<rich:toolTip for="outServ3" value="[IM] #{item.servizioApplicativoErogatore}" rendered="#{item.pddRuolo=='INTEGRATION_MANAGER'}"/>
						</a4j:outputPanel>
						<a4j:outputPanel layout="block" id="metadati" styleClass="metadatiEntry">
							<h:outputText id="outAzione2" value="#{item.azione}" rendered="#{item.pddRuolo!='INTEGRATION_MANAGER'}"/>
							<h:outputText id="outAzione3" value="[IM] #{item.operazioneIm}" rendered="#{item.pddRuolo=='INTEGRATION_MANAGER' and not empty item.operazioneIm}"/>
							<rich:spacer width="12" rendered="#{not empty item.azione}"/>
							<h:outputText id="outServizioApplicativoFruitore2" value="#{item.servizioApplicativoFruitore} (#{item.nomeSoggettoFruitore})" rendered="#{(not empty item.nomeSoggettoFruitore) and (not empty item.servizioApplicativoFruitore)}"/>
							<h:outputText id="outServizioApplicativoFruitore3" value="#{item.servizioApplicativoFruitore}" rendered="#{(empty item.nomeSoggettoFruitore) and (not empty item.servizioApplicativoFruitore)}"/>
							<h:outputText id="outServizioApplicativoFruitore4" value="#{item.nomeSoggettoFruitore}" rendered="#{(not empty item.nomeSoggettoFruitore) and (empty item.servizioApplicativoFruitore)}"/>
						</a4j:outputPanel>
					</a4j:outputPanel>
				
				</rich:column>
			</link:simpleDataTable>
		</a4j:outputPanel>
    </a4j:outputPanel>
</ui:composition>
