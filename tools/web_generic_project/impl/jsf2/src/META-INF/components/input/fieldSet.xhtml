
<!DOCTYPE ui:component
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
 xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:op2web="http://www.openspcoop2.org/web/taglib/jsf2" xmlns:c="http://java.sun.com/jsp/jstl/core">
	<h:outputScript xmlns="" library="scripts" name="jquery.collapsible.min.js"/>
	<h:outputStylesheet xmlns="" library="css" name="fieldset.css"/>
	
	<c:if test="#{empty rendered}">
		<c:set var="rendered" value="true"/>
	</c:if>
	<c:if test="#{empty closed}">
		<c:set var="closed" value="false"/>
	</c:if>
	<c:if test="#{empty collapsible}">
		<c:set var="collapsible" value="true"/>
	</c:if>
	
	<c:set var="fStyleClass" value="#{collapsible ? (closed ? 'collapsibleClosed' : 'collapsible')  : ''} #{fieldsetStyleClass}"/>
	
	
	<a4j:outputPanel layout="block" rendered="#{rendered}">
		<fieldset class="#{fStyleClass}">
			<legend>#{legend}</legend>
			<c:if test="#{rendered}">
				<ui:insert/>
			</c:if>
		</fieldset>
		<rich:jQuery timing="domready" selector="fieldset.collapsible" query="collapse()"/>
		<rich:jQuery timing="domready" selector="fieldset.collapsibleClosed" query="collapse({closed: true})"/>
	</a4j:outputPanel>
</ui:component>