<project name="openspcoop2-apiBuild">
	
    <description>
        Genera documentazione API
    </description>

	<!-- estensione di ant (if .... ) -->
	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
          <classpath>
              <pathelement location="${required_lib}/ant/ant-contrib-1.0b3.jar"/>
          </classpath>
	</taskdef>	
		
	<target name="init_compile-api">
		<mkdir dir="${doc}" />
		<mkdir dir="${doc}/api" />
		<delete dir="${doc}/api/${compile_src_openspcoop2.DIST_DIR_NAME}" failonerror="false" />
		<mkdir dir="${doc}/api/${compile_src_openspcoop2.DIST_DIR_NAME}" />
	</target>

	
	<!-- Compilazione API di OpenSPCoop v2 -->
	<target name="compile_api_openspcoop2">

		<if>
			<istrue value="${buildAPI}"/>
			<then>

				<antcall target="init_compile-api">
					<param name="compile_src_openspcoop2.DIST_DIR_NAME" value="${compile_src_openspcoop2.DIST_DIR_NAME}"/>
					<param name="doc" value="${doc}"/>
				</antcall>
				
				<echo message="build API for packages: ${compile_src_openspcoop2.PACKAGES}"/>
				<!-- <echo message="build DEST API for packages: ${compile_src_openspcoop2.API_DIR_NAME}"/> -->
				<javadoc destdir="${compile_src_openspcoop2.API_DIR_NAME}" 
					sourcepath="${src}" author="true" version="true" Private="false" use="true" 
					windowtitle="API OpenSPCoop2 [${compile_src_openspcoop2.DIST_DIR_NAME}]" 
					packagenames="${compile_src_openspcoop2.PACKAGES}">
					<doctitle>
						<![CDATA[<h1>API OpenSPCoop2 [${compile_src_openspcoop2.DIST_DIR_NAME}]</h1>]]>
					</doctitle>
					<bottom>
						<![CDATA[<i>Copyright 2005-2014 Link.it srl, http://link.it.</i>]]>
					</bottom>
					<bootclasspath>
						<path refid="classpath_jre" />
					</bootclasspath>
					<classpath>
						<path refid="classpath_compile" />
						<path refid="classpath_dist" />
						<fileset dir="${dist}" >
							<include name="**/*.jar"/>
						</fileset>
					</classpath>
				</javadoc>
				
				<concat destfile="${compile_src_openspcoop2.API_DIR_NAME}/package-list.info">${compile_src_openspcoop2.PACKAGES}</concat>
				
			</then>
		</if>
		
	</target>
		
		
</project>
